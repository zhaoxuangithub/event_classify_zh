同年冬十二月廿九日，踞守在上海县城的小刀会遭到围攻：除夕当天江宁知府刘存厚令清军于县城墙底埋炸药，轰塌上海县城墙二十余丈；咸丰五年正月初一日清军自此缺口涌入城内，与小刀会展开巷战，逮捕小刀会头目谢安邦、陈芝，惟存刘丽川率死党奋力逃出上海县，虎嵩林领军追之，至虹桥追至刘予以格毙，刘坐逝中流弹于井边。